# Contributor: Jens Pranaitis <jens@chaox.net>
# Contributor: Francesco Piccinno <stack.box@gmail.com>
# Contributor: William Rea <sillywilly@gmail.com>
# Contributor: Eduard Warkentin <eduard.warkentin@gmail.com>
# Contributor: Lorenzo Nizzi Grifi Gargiolli <lorenzo.nizzi.grifi@gmail.com>

pkgname=opensc
pkgver=0.11.11
pkgrel=1
pkgdesc="Access smart cards that support cryptographic operations"
arch=('i686')
url="http://www.opensc-project.org/opensc"
updateurl="http://www.opensc-project.org/files/opensc/=>opensc-"
license=("LGPL")
options=('!libtool')
backup=(etc/opensc.conf)
depends=('zlib' 'openssl' 'openct' 'pcsclite')
groups=('archpwn' 'archpwn-smartcard')
source=(http://www.opensc-project.org/files/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('9c3290f7cb82273136b1584e198157dc')

build() {
  cd $startdir/src/$pkgname-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --enable-openct --enable-nsplugin --enable-pcsc --with-plugin-dir=/usr/lib/mozilla/plugins
  make || return 1
  make DESTDIR=$startdir/pkg install
  install -D $startdir/src/$pkgname-$pkgver/etc/opensc.conf $startdir/pkg/etc/opensc.conf
  chown -R root:root $startdir/pkg/
}
