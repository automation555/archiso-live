# Contributor: Jens Pranaitis <jens@jenux.homelinux.org>
# Contributor: Francesco Piccinno <stack.box@gmail.com>

pkgname=lynis
pkgver=1.2.7
pkgrel=1
pkgdesc='Lynis is an auditing tool for Unix (specialists)'
url='http://www.rootkit.nl/projects/lynis.html'
updateurl='http://www.rootkit.nl/projects/lynis.html=>lynis-'
license=('GPL')
arch=('i686' 'x86_64')
depends=('bash')
groups=('archpwn' 'archpwn-scanners' 'archpwn-misc')
source=(http://www.rootkit.nl/files/$pkgname-$pkgver.tar.gz)
md5sums=('62919d09a862f24dffb224f758dcdb9a')

build() {
  mkdir -p ${pkgdir}/{usr/share/$pkgname,usr/share/man/man8}
  install -Dm 644 "${srcdir}"/$pkgname-$pkgver/$pkgname.8 $pkgdir/usr/share/man/man8/$pkgname.8 || return 1
  cp -ax "${srcdir}"/$pkgname-$pkgver/* $pkgdir/usr/share/$pkgname
  mkdir -p $pkgdir/usr/sbin
  cat > $pkgdir/usr/sbin/lynis << EOF
#!/bin/bash
cd /usr/share/lynis
./lynis \$@
cd \$OLDPWD
EOF
  chmod 755 $pkgdir/usr/sbin/lynis
}
