# Contributor: Francesco Piccinno <stack.box@gmail.com>

pkgname=metasploit3
pkgver=3.2
pkgrel=1
pkgdesc="The Metasploit Framework is an advanced open-source platform for developing, testing, and using exploit code"
depends=('ruby' 'ruby-gtk2' 'ruby-libglade')
makedepends=('subversion')
groups=('archpwn' 'archpwn-exploits')
source=(http://spool.metasploit.com/releases/framework-$pkgver.tar.gz)
url="http://www.metasploit3.com/"
md5sums=('d543bda031b36a247912aa9c6a0f74d9')
license=('custom')
arch=('i686' 'x86_64')

build() {
  cd $srcdir/framework-$pkgver/
  
  echo "Updating ..." && svn up
  
  install -d $pkgdir/usr/share/$pkgname/ && \
  install -d $pkgdir/usr/share/licenses/$pkgname/ &&
  install -d $pkgdir/etc/profile.d/ &&
  cp -r * $pkgdir/usr/share/$pkgname/ && \
  install -Dm644 README $startdir/pkg/usr/share/licenses/$pkgname/LICENSE || return 1
  
  echo "export PATH=\$PATH:/usr/share/$pkgname/" > $pkgdir/etc/profile.d/$pkgname.sh
  chmod 0755 $pkgdir/etc/profile.d/$pkgname.sh
}
