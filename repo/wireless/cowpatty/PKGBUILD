# Contributor: icarus <icarus.roaming@gmail.com>
# Contributor: Francesco Piccinno <stack.box@gmail.com>

pkgname=cowpatty
pkgver=4.3
pkgrel=1
pkgdesc="Wireless WPA/WPA2 PSK handshake cracking utility"
arch=('i686' 'x86_64')
url="http://www.willhackforsushi.com/Cowpatty.html"
license=('GPL')
depends=('openssl')
groups=('archpwn' 'archpwn-wireless' 'archpwn-password' 'archpwn-bruteforce')
source=(http://www.willhackforsushi.com/code/$pkgname/$pkgver/$pkgname-$pkgver.tgz)
md5sums=('deccac0763a05ef7014107d347bf9190')

build() {
  cd "$srcdir/$pkgname-$pkgver"

  make || return 1

#fakeroot + install is not properly setting owner right now, so chown is being used instead
#this is slightly messy for removing pkgbuild files after build, I'll fix it when possible  
  
  chown root:root * 

  install $pkgname -D $pkgdir/usr/bin/$pkgname -m 0755
  install genpmk -D $pkgdir/usr/bin/genpmk -m 0755
  install AUTHORS -D $pkgdir/usr/share/doc/$pkgname/AUTHORS -m 0664
  install CHANGELOG -D $pkgdir/usr/share/doc/$pkgname/CHANGELOG -m 0664
  install COPYING -D $pkgdir/usr/share/doc/$pkgname/COPYING -m 0664
  install FAQ -D $pkgdir/usr/share/doc/$pkgname/FAQ -m 0664
  install README -D $pkgdir/usr/share/doc/$pkgname/README -m 0664
  install TODO -D $pkgdir/usr/share/doc/$pkgname/TODO -m 0664
  install dict -D $pkgdir/usr/share/$pkgname/dict -m 0664
  install eap-test.dump -D $pkgdir/usr/share/$pkgname/eap-test.dump -m 0664
  install file_magic -D $pkgdir/usr/share/$pkgname/file_magic -m 0664
  install wpa2psk-linksys.dump -D $pkgdir/usr/share/$pkgname/wpa2psk-linksys.dump -m 0664
  install wpapsk-linksys.dump -D $pkgdir/usr/share/$pkgname/wpapsk-linksys.dump -m 0664
}
