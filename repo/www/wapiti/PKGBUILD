# Contributor: Francesco Piccinno <stack.box@gmail.com>

pkgname=wapiti
pkgver=2.0.0b
_pkgver=2.0.0-beta
pkgrel=1
pkgdesc="Web application vulnerability scanner / security auditorwapiti.sourceforge.net/"
url="http://wapiti.sourceforge.net/"
groups=('archpwn' 'archpwn-scanners' 'archpwn-www')
license=('GPL')
arch=(any)
depends=('python>=2.4')
source=(http://downloads.sourceforge.net/wapiti/$pkgname-$_pkgver.tar.gz)
md5sums=('7e17e3942860bf1e8f3d822d9df7a0df')

build() {
  cd "$srcdir/$pkgname-$_pkgver"

  install -d $pkgdir/usr/bin && \
  install -d $pkgdir/usr/share/$pkgname/ && \
  install -d $pkgdir/usr/share/doc/$pkgname/ || return 1

  cp -r doc/* $pkgdir/usr/share/doc/$pkgname/ &&
  cp -r src/* $pkgdir/usr/share/$pkgname/ || return 1

  cat > $pkgdir/usr/bin/$pkgname << EOF
#!/bin/sh
cd /usr/share/$pkgname/ && python wapiti.py
EOF
  chmod 0755 $pkgdir/usr/bin/$pkgname $pkgdir/usr/share/$pkgname/wapiti.py || return 1
}

# vim:set ts=2 sw=2 et:
