# Contributor: nofxx <x@nofxx.com>
# Contributor: Francesco Piccinno <stack.box@gmail.com>
# Maintainer: ≈Åukasz Fidosz <virhilo@gmail.com>

pkgname=rt73-k2wrlz
pkgver=3.0.2
pkgrel=2
pkgdesc="RaLink RT73 USB Enhanced Drivers"
arch=('i686' 'x86_64')
url="http://homepages.tu-darmstadt.de/~p_larbig/wlan"
license=('GPL')
depends=('kernel26')
install=rt73.install
source=(http://homepages.tu-darmstadt.de/~p_larbig/wlan/$pkgname-$pkgver.tar.bz2)
md5sums=('26467e32a3e627c5da2d2c10a4f7f886')
_kernver=2.6.28-ARCH

build() {
  cd $startdir/src/$pkgname-$pkgver/Module
  make KERNDIR=/lib/modules/$_kernver/build || return 1
  install -Dm644 rt73.ko $startdir/pkg/lib/modules/$_kernver/kernel/drivers/net/wireless/rt73.ko || return 1
  sed -i -e "s/KERNEL_VERSION='.*'/KERNEL_VERSION='${_kernver}'/" $startdir/*.install
}
